## Pinecone Vector DB

It's a cloud-native vector database that handles high-dimensional vector data.

**Levels:**
- Organization (Org)
- Projects
- Indexes

**Index Types:**
1. Serverless
2. Pod
   - Storage Optimized (s1)
   - Performance Optimized (p1, p2)

**API Key Setup:**
```bash
echo 'PINECONE_API_KEY=your-api-key' >> .env
```

**Library Installation:**
```python
from dotenv import load_dotenv
load_dotenv()
!pip install pinecone-client
```

**Pinecone Initialization:**
```python
from pinecone import Pinecone
import os

key = os.getenv("PINECONE_API_KEY")
client = Pinecone(api_key=key)
```

**Index Description:**
```python
client.describe_index('trng-index')
```

**Index Creation:**
```python
from pinecone import PodSpec

client.create_index(
    name='starter',
    dimension=1024,
    spec=PodSpec(
        environment='gcp-starter'
    )
)
```

**Index Initialization:**
```python
index = client.Index('trng-index')
```

**Embedding Model Setup:**
```python
from sentence_transformers import SentenceTransformer

model = SentenceTransformer('thenlper/gte-large')
```

**Sample Sentences Embedding:**
```python
random_sentences = ["...", "...", "..."]  # List of sentences
embeddings = [model.encode(i) for i in random_sentences]
vectors = [{'id': str(i), 'values': embeddings[i], 'metadata': {'text': random_sentences[i]}} for i in range(len(random_sentences))]
```

**Upserting Vectors to Index:**
```python
index.upsert(
    vectors=vectors,
    namespace='sample-namespace'
)
```

**Querying Index:**
```python
query = 'old lighthouse stood tall'
query_vector = model.encode(query)
result = index.query(
    vector=query_vector.tolist(),
    top_k=2,
    namespace='sample-namespace',
    include_values=True,
    include_metadata=True
)
result['matches'][0].metadata
```

**Deleting Vectors from Index:**
```python
index.delete(
    ids=['1', '2'],
    namespace='sample-namespace'
)
```

**Index Stats:**
```python
index.describe_index_stats()
```

**Pandas Integration Example:**
```python
!pip install pandas
import pandas as pd

df = pd.read_csv('menu_items.csv')
item_ids = df['item_id']
item_names = df['item_name']
embeds = [model.encode(i) for i in item_names]
vectors = [{'id': str(i), 'values': embeds[i], 'metadata': {'item_name': item_names[i], 'item_id': item_ids[i]}} for i in range(len(item_ids))]
```

**Upserting Vectors from DataFrame to Index:**
```python
index.upsert(
    vectors=vectors,
    namespace='menu_items'
)
```

**Querying Index with DataFrame:**
```python
query = 'Vegan'
query_vector = model.encode(query)
result = index.query(
    vector=query_vector.tolist(),
    namespace='menu_items',
    include_metadata=True,
    top_k=5
)
result
```
